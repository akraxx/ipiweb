<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition template="/WEB-INF/templates/base.xhtml">
	<ui:define name="title">Administration - Formulaire article</ui:define>
	<ui:define name="content">
		<div class="row">
			<div class="col-lg-12">
				<h:form styleClass="form-horizontal">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">Formulaire article</h3>
						</div>
						<div class="panel-body">
							<div class="row">
								<div class="col-lg-8 col-lg-offset-2">
									<div class="form-group">
										<h:outputLabel for="enseigne"
											styleClass="col-sm-4 control-label">Enseigne</h:outputLabel>
										<div class="col-sm-8">
											<h:selectOneMenu id="enseigne" styleClass="form-control" value="#{codePromoBean.newCodePromo.enseigne}" >
											    <f:selectItems value="#{codePromoBean.enseignes}"
											    				var="enseigne"
														        itemValue="#{enseigne}"  />
											</h:selectOneMenu>
											<h:message for="enseigne" />
										</div>
									</div>
									<div class="form-group">
										<h:outputLabel for="id-code"
											styleClass="col-sm-4 control-label">Id du code</h:outputLabel>
										<div class="col-sm-8">
											<h:inputText id="id-code" value="#{codePromoBean.newCodePromo.id}"
												styleClass="form-control"/>
											<h:message for="id-code" />
										</div>
									</div>
									<div class="form-group">
										<h:outputLabel for="date-debut"
											styleClass="col-sm-4 control-label">Date début</h:outputLabel>
										<div class="col-sm-8">
											<h:inputText id="date-debut" value="#{codePromoBean.newDateDebut}"
												styleClass="form-control datepicker" />
											<h:message for="date-debut" />
										</div>
									</div>
									<div class="form-group">
										<h:outputLabel for="date-fin"
											styleClass="col-sm-4 control-label">Date fin</h:outputLabel>
										<div class="col-sm-8">
											<h:inputText id="date-fin" value="#{codePromoBean.newDateFin}"
												styleClass="form-control datepicker" />
											<h:message for="date-fin" />
										</div>
									</div>
									<div class="form-group">
										<h:outputLabel for="type-promo"
											styleClass="col-sm-4 control-label">Type promotion</h:outputLabel>
										<div class="col-sm-8">
											<h:selectOneMenu id="type-promo" styleClass="form-control" value="#{codePromoBean.newCodePromo.typePromotion}" >
											    <f:selectItems value="#{codePromoBean.typePromotions}"
											    				var="typePromotion"
														        itemValue="#{typePromotion}"  />
											</h:selectOneMenu>
											<h:message for="type-promo" />
										</div>
									</div>
									<div class="form-group" id="line-pourcentage">
										<h:outputLabel for="pourcentage"
											styleClass="col-sm-4 control-label">Pourcentage de réduction</h:outputLabel>
										<div class="col-sm-8">
											<h:selectOneMenu id="pourcentage" styleClass="form-control" value="#{codePromoBean.newCodePromo.pourcentage}" >
												<f:selectItems value="#{codePromoBean.pourcentages}"
											    				var="pourcentage"
														        itemValue="#{pourcentage}"
														        itemLabel="#{pourcentage}%"  />
											</h:selectOneMenu>
											<h:message for="pourcentage" />
										</div>
									</div>
									<div class="form-group" id="line-reference">
										<h:outputLabel for="reference"
											styleClass="col-sm-4 control-label">Référence article</h:outputLabel>
										<div class="col-sm-8">
											<h:inputText id="reference" value="#{codePromoBean.newCodePromo.reference}"
												styleClass="form-control" />
											<h:message for="reference" />
										</div>
									</div>
								</div>

							</div>
						</div>
						<div class="panel-footer">
							<div class="row">
								<div class="col-lg-12">
									<div class="form-group">
										<div class="col-sm-offset-5 col-sm-2">
											<h:commandButton styleClass="btn btn-primary" value="Ajouter"
												action="#{codePromoBean.createCodePromo}" />
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</h:form>
			</div>
		</div>
		<script type="text/javascript">
			function checkTypePromotion() {
				console.log("change");
				$("#line-reference").hide();
				$("#line-pourcentage").hide();
	            
		        $("select[id$='type-promo']").each(function() {
		            var id = $(this).val();
		            if(id == "REDART" || id == "REDKDO") {
		            	$("#line-reference").fadeIn();
			       	}
		            if(id == "REDART" || id == "REDCMD") {
		            	$("#line-pourcentage").fadeIn();
			       	}
		            
		        });
			}
			
			$(document).ready(function() {
				checkTypePromotion();
			});
			
			$("select[id$='type-promo']").change(function () {
				checkTypePromotion();
		    });
		</script>
	</ui:define>
</ui:composition>
</html>